# 计算表达式

当我们想临时修攺某个变量的值或查看其内部方法返回值的时候,可以使用计算表达式功能.

Android Studio中提供了一个计算表达式和代码片段的功能, 使用起来非常方便.它除了支持正则表达式计算以外,还支持操作表达式,匿名表达式和内部类的计算.

**两种计算模式:**

Expression Mode: 计算单行表达式

Code Fragment Mode: 计算代码片段, 我们可以对声明、赋值、循环和if\/else进行计算.

**使用表达式计算功能时需要注意:**

1.只有在调试并且断点被触发的时候, 才可以使用计算表达式功能. 也就是说如果不是在调试的状态,计算表达式功能是不可用的.

2.如果计算表达式内调用一个方法,方法内又恰好有断点,那么该断点会被忽略,会直接计算出表达式的值.

### 在堆栈帧中计算表达式或代码片段

### 操作步骤:

**第1步: 帧调试窗口中,选择你想要计算表达式的堆栈帧.**

**第2步: 调用计算表达式功能,有三种方法:**

菜单栏 —&gt; Run --&gt; Evaluate Expression

### 快捷键:

Mac: fn + option + F8

Windows\/Linux: Alt + F8

在编辑器中光标定位处右击,选择Evaluate Expression

**第3步: 选择计算模式**

有两种计算模式,单行表达式和代码片段,可以通过中间的按钮\[Code Fragment Mode\]和\[Expression Mode\]来切换.

**步骤4: 输入表达式或语句**

基于你选择的模式输入表达式或语句,输入的时候会有补全提示:

> 如果你给对象设置了标签,那么在在输入表达式的时候可以通过标签来找到对应的表达式,Android Studio也会给出补全推荐:

### 步骤5: 执行计算

点击\[Evaluate\]来进行计算.

> 如果指定的表达式不能计算或是有错误,点击\[Evaluate\]后会给出可能的错误原因.

### 计算任意表达式

在变量调试窗口中右击变量 —&gt; Evaluate Expression

会进入表达式计算窗口

之前选中的变量会显示在表达式输入框中.

可以切换计算模式、查看计算过的历史、输入表达式

### 快速计算表达式的值

### 前提条件:

光标放在放达式上或选中表达式

### 操作步骤：

菜单栏: Run --&gt; Quick Evaluate Expression

### 快捷键:

Mac: fn + option + command + F8

Windows\/Linux: Ctrl + Alt + F8

选中表达式立即显示表达式的值

在调试工具栏上点击设置按钮,勾选\[show value on selection change\]

然后再去选中表达式,会在表达式的上面显示计算出来的结果.

> 此功能默认是不开启的

